# Optuna Hyperparameter Tuning Configuration
# ==========================================

# Study Settings
study:
  name: "sustainability_tuning"
  direction: "minimize"  # minimize val_loss
  metric_name: "val_loss"

# Trial Settings
trials:
  n_trials: 50
  timeout: null  # seconds, null for unlimited
  epochs_per_trial: 50
  early_stopping_patience: 5

# Final Model Training
final_training:
  epochs: 100
  early_stopping_patience: 15

# Search Space Configuration
search_space:
  # Network Architecture
  architecture:
    n_layers:
      min: 1
      max: 4
    hidden_dim:
      min: 16
      max: 128
      step: 16
    dropout_rate:
      min: 0.1
      max: 0.5

  # Training Hyperparameters
  training:
    learning_rate:
      min: 1.0e-5
      max: 1.0e-2
      log_scale: true
    batch_size:
      choices: [16, 32, 64, 128]
    weight_decay:
      min: 1.0e-6
      max: 1.0e-3
      log_scale: true

# Pruning Configuration
pruning:
  type: "median"  # median, hyperband
  n_warmup_steps: 10
  # Hyperband settings (if type: hyperband)
  hyperband:
    min_resource: 10
    max_resource: 50
    reduction_factor: 3

# Sampler Configuration
sampler:
  type: "tpe"  # tpe, random, cmaes
  seed: 42
  # TPE settings
  tpe:
    n_startup_trials: 10
    n_ei_candidates: 24

# MLFlow Integration
mlflow:
  enabled: true
  tracking_uri: "http://localhost:5000"
  experiment_prefix: "optuna_"
  log_artifacts: true

# Visualization
visualization:
  save_plots: true
  output_dir: "outputs/figures/optuna"
  plots:
    - optimization_history
    - param_importances
    - parallel_coordinate
    - slice

# Persistence
storage:
  # SQLite storage for resumable studies
  type: "sqlite"
  path: "outputs/optuna_studies.db"
